<#bs4Body>
<div class="container-fluid">
    <form id="addForm" role="form" novalidate>
        <input type="hidden" name="dataSourceId" value="${item.dataSourceId!}">
        <input type="hidden" id="id" name="id" value="${item.id!}">
        <div class="row row-cols-1">
            <div class="form-group col">
                <label for="label" class="">查询框Label<i class="red">*</i></label>
                <input type="text" class="form-control" id="label" name="label" maxlength="20" value="${item.label!}" required placeholder="用于显示的label" />
            </div>
            <div class="form-group col">
                <label for="matchKey" class="">查询匹配Key<i class="red">*</i></label>
                <input type="text" class="form-control" id="queryKey" name="queryKey" maxlength="20" value="${item.queryKey!}" required />
            </div>

            <div class="form-group col">
                <label for="defaultValues" class="">默认值</label>
                <input type="text" class="form-control" id="defaultValues" name="defaultVal" maxlength="255" value="${item.defaultVal!}"  placeholder="查询默认值" />
            </div>
        </div>
        <div class="text-right mt-2">
            <button type="button" class="btn btn-secondary px-5" id="formCancel" onclick="javascript:parent.dia.hide()">取消</button>
            <button type="button" class="btn btn-primary px-5" id="formSubmit">保存</button>
        </div>
    </form>
</div>
</#bs4Body>
<script type="text/javascript" src="${contextPath}/resources/js/jquery.serializejson-2.9.0.min.js"></script>
<script>

                /**
                 * 保存定义数据
                 */
                $('#formSubmit').on('click', function () {
                    if (!$('#addForm').valid()) {
                        return false;
                    } else {
                        $.ajax({
                            type: 'post',
                            url: "${contextPath}/datasourceQueryConfig/save.action",
                            contentType: "application/json; charset=utf-8",
                            data: JSON.stringify($('#addForm').serializeJSON()),
                            success: function (ret) {
                                if (ret.success) {
                                    bs4pop.alert("保存成功", {type: 'success', width: 400}, function () {
                                        parent.dia.hide();
                                        parent.queryDataHandler();
                                    });
                                } else {
                                    bs4pop.alert(ret.result, {width: 400, type: 'error'});
                                }
                            },
                            error: function (error) {
                                bui.loading.hide();
                                bs4pop.alert(error.result, {width: 400, type: 'error'}, function () {

                                });
                            }
                        });
                    }
                });

</script>